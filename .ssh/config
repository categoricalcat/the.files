# Include additional config files
Include config.d/*

# Global performance settings for all hosts
Host *
    AddKeysToAgent 900

    # Connection multiplexing - DISABLED on Windows (causes socket errors)
    ControlMaster no
    # ControlPath ~/.ssh/control-%C
    # ControlPersist 10m
    
    # Keep connections alive
    ServerAliveInterval 60
    ServerAliveCountMax 3
    
    # Faster cipher and MAC algorithms
    Ciphers aes128-gcm@openssh.com,aes256-gcm@openssh.com,chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr
    MACs umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com
    
    # Compression for slower networks (disable for fast LANs)
    Compression no
    
    # Faster key exchange algorithms
    KexAlgorithms curve25519-sha256,curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256
    
    # Skip host key checking for known hosts (use cautiously)
    StrictHostKeyChecking accept-new
    
    # Reduce connection timeout
    ConnectTimeout 10
    
    # Use persistent connections
    TCPKeepAlive yes
    
    # Enable connection sharing
    ForwardAgent no
    ForwardX11 no

# Docker access via SSH tunneling
Host fufud
    HostName fufuwuqi.local
    User fufud
    IdentityFile ~/.ssh/id_ed25519
    Port 24212
    LocalForward 2375 /var/run/docker.sock

Host workd
    HostName fufuwuqi.local
    User workd
    IdentityFile ~/.ssh/id_ed25519
    Port 24212
    LocalForward 2375 /var/run/docker.sock

Host macbook
    HostName 192.168.1.28
    User fares
    IdentityFile ~/.ssh/id_ed25519
    Port 22

Host ssh.fufu.land
    HostName ssh.fufu.land
    User fufud
    ProxyCommand cloudflared access ssh --hostname %h